# tmux aliases and functions
alias tmux="TERM=screen-256color tmux"
alias tl="tmux ls"
alias td="tmux detach"

function tn {
  readonly s=${1:? "Must provide session"}
  tmux new -s "$s"
}

function ta {
  readonly t=${1:? "Must provide session"}
  tmux attach -t "$t"
}

function ts() {
  tmux choose-tree -s
}

# execute multiple command in separate tmux panes
tt() {
  if [ $# -lt 1 ]; then
    echo 'usage: tt <commands...>'
    return 1
  fi

  local head="$1"
  local tail='echo -n Press enter to finish.; read'

  while [ $# -gt 1 ]; do
    shift
    tmux split-window "$SHELL -ci \"$1; $tail\""
    tmux select-layout tiled > /dev/null
  done

  tmux set-window-option synchronize-panes on > /dev/null
  $SHELL -ci "$head; $tail"
}
